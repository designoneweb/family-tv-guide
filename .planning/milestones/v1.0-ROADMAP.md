# Milestone v1.0: Family Launch

**Status:** ✅ SHIPPED 2026-01-19
**Phases:** 1-10.1
**Total Plans:** 28

## Overview

Build a dark-mode, art-forward TV guide web app from foundation through AI-enhanced features. Start with auth and data model, integrate TMDB for metadata, build library and schedule management, add episode-level tracking and browsing, then layer in person pages and optional AI synopsis generation.

## Phases

### Phase 1: Foundation

**Goal**: Working Next.js App Router app with Supabase Auth, protected routes, and dark theme baseline
**Depends on**: Nothing (first phase)
**Plans**: 3 plans

Plans:
- [x] 01-01: Project Setup and Supabase Config
- [x] 01-02: Supabase Auth with SSR
- [x] 01-03: Protected Routes and Auth Flow

**Details:**
- Used Next.js 16.1.3 with App Router
- Dark mode via className="dark" (Tailwind v4)
- @supabase/ssr for cookie-based sessions
- Route groups: (marketing) public, /app protected

### Phase 2: Data Model

**Goal**: Complete database schema with RLS policies, household and profile management UI
**Depends on**: Phase 1
**Plans**: 5 plans

Plans:
- [x] 02-01: Core Database Schema
- [x] 02-02: RLS Policies
- [x] 02-03: Auto-provisioning Triggers
- [x] 02-04: Profile Selection UI
- [x] 02-05: Profile Management CRUD

**Details:**
- UUID primary keys with gen_random_uuid()
- ON DELETE CASCADE on all foreign keys
- SECURITY DEFINER functions for RLS helper and triggers
- localStorage for profile persistence
- Avatar as color picker (8 presets)

### Phase 3: TMDB Integration

**Goal**: Server-side TMDB proxy with search, metadata fetching, and image URL handling
**Depends on**: Phase 2
**Plans**: 2 plans

Plans:
- [x] 03-01: TMDB API Client and Search
- [x] 03-02: Metadata and Provider Fetching

**Details:**
- Server-side only TMDB calls via API route
- Combined multi-search sorts by popularity
- Default to US region for watch providers
- Hardcoded image sizes (TMDB rarely changes)

### Phase 4: Library Management

**Goal**: Add/remove TV shows and movies to household library, display with posters, show streaming providers
**Depends on**: Phase 3
**Plans**: 3 plans

Plans:
- [x] 04-01: Add Title API Route
- [x] 04-02: Search and Add UI
- [x] 04-03: Library Display Page

**Details:**
- Upsert for addTitle with onConflict
- Debounce 300ms for search input
- TitleCard as reusable component
- Parallel library status checks

### Phase 5: Schedule System

**Goal**: Assign titles to days of week, reorder slots, "Tonight" view showing current day's schedule
**Depends on**: Phase 4
**Plans**: 3 plans

Plans:
- [x] 05-01: Schedule API Routes
- [x] 05-02: Schedule Management UI
- [x] 05-03: Tonight View

**Details:**
- Gaps in slot_order allowed (simplifies deletion)
- Shift-then-update for reorder
- 3-step swap via temp slot for unique constraint
- Schedule API returns camelCase fields

### Phase 6: Progress Tracking

**Goal**: Track current episode per profile per series, mark watched, jump to episode
**Depends on**: Phase 5
**Plans**: 3 plans

Plans:
- [x] 06-01: Progress Service and API
- [x] 06-02: Mark Watched UI
- [x] 06-03: Jump to Episode Dialog

**Details:**
- Default to S1E1 if no progress exists
- Return current position when show complete
- Optimistic UI for Mark Watched
- Cascading dropdowns with season reset

### Phase 7: Episode Grid

**Goal**: Art-dominant season view with episode tile grid, stills, titles, descriptions
**Depends on**: Phase 6
**Plans**: 1 plan

Plans:
- [x] 07-01: Show Page with Episode Grid

**Details:**
- Tabs for ≤6 seasons, dropdown for more
- 16:9 aspect ratio for episode stills
- Episode badge overlay E5 format

### Phase 8: Episode Detail

**Goal**: Full episode page with overview, large still, main cast, guest stars, mark watched action
**Depends on**: Phase 7
**Plans**: 2 plans

Plans:
- [x] 08-01: Episode Credits API
- [x] 08-02: Episode Detail Page

**Details:**
- Profile image sizes: w45 (small), w185 (medium), h632 (large)
- Episode still fallback to show backdrop
- Mark Watched 1.5s delay before navigation

### Phase 8.1: Schedule UX (INSERTED)

**Goal**: Simplify schedule grid display, show full episode details on click, fix episode runtime
**Depends on**: Phase 8 (uses episode detail patterns)
**Plans**: 1 plan

Plans:
- [x] 08.1-01: Schedule Grid Improvement

**Details:**
- Episode still links to episode detail page
- Fallback to show poster when no episode still
- Reason: UX feedback - schedule grid wastes space with miniature posters

### Phase 9: Person Pages

**Goal**: IMDb-like person pages with photo, bio, TV credits, combined filmography
**Depends on**: Phase 8
**Plans**: 2 plans

Plans:
- [x] 09-01: TMDB Person API Integration
- [x] 09-02: Person Detail Page

**Details:**
- Combined credits (TV + movies) for full filmography
- Acting/Crew filter with tabs
- Clickable cast cards throughout app

### Phase 10: AI Synopsis

**Goal**: Server-side spoiler-safe synopsis generation with Gemini 1.5 Flash, caching, graceful fallback
**Depends on**: Phase 9
**Plans**: 2 plans

Plans:
- [x] 10-01: Gemini API and Caching
- [x] 10-02: AI Synopsis UI

**Details:**
- Return null when Gemini API key missing
- Cache blurbs by composite key (series, season, episode)
- Truncate at sentence boundary for TMDB fallback
- Hide AI synopsis button when API key not configured

### Phase 10.1: UX Polish (INSERTED)

**Goal**: Polish UX with episode stills on Tonight screen, clickable provider icons, enriched show detail page
**Depends on**: Phase 10
**Plans**: 1 plan

Plans:
- [x] 10.1-01: UX Polish Pass

**Details:**
- Episode still (16:9) when currentEpisode exists, else poster (2:3)
- Provider logos link to TMDB JustWatch page
- Cast cards w-24 on show page (vs w-28 on episode)
- Reason: Pre-milestone polish - improve navigation and information density

---

## Milestone Summary

**Decimal Phases:**
- Phase 8.1: Schedule UX (inserted after Phase 8 for UX improvement)
- Phase 10.1: UX Polish (inserted after Phase 10 for pre-milestone polish)

**Key Decisions:**
- @supabase/ssr for cookie-based SSR auth
- TanStack Query for client data with powerful caching
- Server-side TMDB proxy to protect API key
- Per-profile schedules (not household-wide)
- Gemini 1.5 Flash for AI synopsis with conditional display

**Issues Resolved:**
- None — clean execution

**Issues Deferred:**
- Public landing page (marketing priority)
- Maturity levels for profiles
- PIN lock for admin profile
- Binge mode toggle

**Technical Debt Incurred:**
- None significant

---

_For current project status, see .planning/ROADMAP.md_
