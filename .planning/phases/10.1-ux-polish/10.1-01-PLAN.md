---
phase: 10.1-ux-polish
plan: 01
type: execute
---

<objective>
Polish UX with improved navigation and richer show information display.

Purpose: Improve user experience before milestone completion.
Output: Enhanced Tonight screen, clickable providers, enriched show detail page.
</objective>

<context>
@.planning/PROJECT.md
@.planning/STATE.md

**Key files:**
@web/app/app/tonight/tonight-client.tsx
@web/components/title-card.tsx
@web/components/provider-logos.tsx
@web/app/app/show/[id]/show-client.tsx
@web/lib/tmdb/types.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Tonight screen - episode still with navigation</name>
  <files>web/components/title-card.tsx</files>
  <action>
1. Modify TitleCard to use episode still instead of show poster when currentEpisode exists:
   - Import getStillUrl from tmdb/images
   - When currentEpisode with stillPath exists, use episode still as main image
   - Fallback to posterPath when no stillPath
2. Make the image clickable to episode detail page when currentEpisode exists:
   - For TV shows with currentEpisode: link to /app/show/{tmdbId}/season/{season}/episode/{episode}
   - For TV shows without currentEpisode: link to show detail page (existing behavior)
   - For movies: no link (existing behavior)
3. Ensure the image uses 16:9 aspect ratio for episode stills vs 2:3 for posters
  </action>
  <verify>cd web && npm run build succeeds without errors</verify>
  <done>Tonight screen shows episode stills that link to episode detail page</done>
</task>

<task type="auto">
  <name>Task 2: Make provider logos clickable</name>
  <files>web/components/provider-logos.tsx, web/lib/tmdb/types.ts, web/app/api/schedule/route.ts</files>
  <action>
1. Update Provider interface in provider-logos.tsx to include optional link:
   - Add link?: string to Provider interface
2. Wrap provider logo images in anchor tags when link is provided:
   - <a href={link} target="_blank" rel="noopener noreferrer">
   - Add hover effect (opacity or scale) for clickable indication
3. Update schedule API to include the TMDB link in provider data:
   - The TMDB watch provider response includes a `link` field at the region level
   - This links to JustWatch which redirects to the actual streaming service
   - Pass this link with each provider (same link for all providers of a show)
4. Update any other places that use ProviderLogos to pass the link if available
  </action>
  <verify>cd web && npm run build succeeds without errors</verify>
  <done>Provider logos are clickable and open streaming service in new tab</done>
</task>

<task type="auto">
  <name>Task 3: Enrich show detail page header</name>
  <files>web/app/app/show/[id]/show-client.tsx, web/lib/tmdb/client.ts</files>
  <action>
1. Add TMDB function to get TV show credits (if not exists):
   - getTVCredits(tmdbId: number) returning cast array
   - API endpoint: /tv/{series_id}/credits
2. Fetch additional data in show-client.tsx:
   - Watch providers (already have function, need to call)
   - Show credits for main cast
3. Add header section between title and season selector:
   - Full show synopsis (showDetails.overview)
   - Rating display: â˜… {vote_average.toFixed(1)}/10
   - Streaming providers (ProviderLogos component with link)
   - Main cast (horizontal scroll, first 8-10 cast members with photos)
   - Use same CastCard pattern from episode detail page
4. Style the header section:
   - Synopsis in readable paragraph format
   - Metadata row with rating, year range, number of seasons
   - Provider logos inline
   - Cast in horizontal scroll container
  </action>
  <verify>cd web && npm run build succeeds without errors</verify>
  <done>Show detail page displays synopsis, ratings, providers, and cast before seasons</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `cd web && npm run build` succeeds without errors
- [ ] Tonight screen shows episode stills (not posters) for TV shows with progress
- [ ] Clicking episode image on Tonight navigates to episode detail page
- [ ] Provider logos are clickable and open JustWatch/streaming service
- [ ] Show detail page shows synopsis before seasons
- [ ] Show detail page shows rating
- [ ] Show detail page shows streaming providers
- [ ] Show detail page shows main cast
</verification>

<success_criteria>
- All tasks completed
- All verification checks pass
- No TypeScript errors
- UX improvements visible and functional
</success_criteria>

<output>
After completion, create `.planning/phases/10.1-ux-polish/10.1-01-SUMMARY.md`
</output>
